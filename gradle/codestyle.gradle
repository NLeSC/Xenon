// Check coding style with PMD
// Depends on plugins:
//    id 'pmd'

dependencies {
    pmd(
        'net.sourceforge.pmd:pmd-core:5.4.0',
        'net.sourceforge.pmd:pmd-java:5.4.0'
    )
}

pmd {
    // TODO: remove when PMD warnings are fixed
    ignoreFailures = true

    toolVersion = '5.4.0'
    ruleSets = []
    ruleSetFiles = files("config/pmd/ruleset.xml")
}

pmdTest {
    ruleSetFiles = files("config/pmd/test_ruleset.xml")
}

pmdIntegrationTest {
    ruleSetFiles = files("config/pmd/test_ruleset.xml")
}

group = 'nlesc'
sonarqube {
    properties {
        property 'sonar.host.url', 'https://sonarqube.com'
        property 'sonar.organization', project.group
        property 'sonar.language', 'java'
        property 'sonar.links.homepage', 'https://github.com/NLeSC/Xenon'
        properties["sonar.tests"] += sourceSets.integrationTest.allSource.srcDirs
        property 'sonar.jacoco.reportPaths', [jacocoTestReport.executionData, jacocoIntegrationTestReport.executionData]
    }
}
//project.tasks["sonarqube"].dependsOn "integrationTest"